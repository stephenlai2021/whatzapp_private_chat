import{S as O,i as D,s as $,e as v,t as P,c as b,a as w,g as N,d as m,b as k,f as E,G as h,h as z,k as S,n as I,L as T,M as U,N as R,K as A,O as V,P as x,Q as F,R as ee,T as te,U as le,V as re,l as G,u as L,w as W,x as M,A as se,r as B,W as ne,F as C,j as H,m as K,o as Q,v as J}from"../chunks/vendor-055e1022.js";import{a as j,d as X,g as ie}from"../chunks/navigation-67eee336.js";import"../chunks/singletons-12a22614.js";function Y(f){let e,t;return{c(){e=v("p"),t=P(f[3]),this.h()},l(s){e=b(s,"P",{class:!0});var l=w(e);t=N(l,f[3]),l.forEach(m),this.h()},h(){k(e,"class","error svelte-1fi3y4c")},m(s,l){E(s,e,l),h(e,t)},p(s,l){l&8&&z(t,s[3])},d(s){s&&m(e)}}}function ae(f){let e,t,s,l,c,i,p,n,_,g,u,d,a=f[3]&&Y(f);return{c(){e=v("form"),t=v("input"),s=S(),l=v("input"),c=S(),i=v("input"),p=S(),n=v("button"),_=P("Sign up"),g=S(),a&&a.c(),this.h()},l(r){e=b(r,"FORM",{});var o=w(e);t=b(o,"INPUT",{type:!0,placeholder:!0}),s=I(o),l=b(o,"INPUT",{type:!0,placeholder:!0}),c=I(o),i=b(o,"INPUT",{type:!0,placeholder:!0}),p=I(o),n=b(o,"BUTTON",{});var y=w(n);_=N(y,"Sign up"),y.forEach(m),g=I(o),a&&a.l(o),o.forEach(m),this.h()},h(){k(t,"type","text"),t.required=!0,k(t,"placeholder","display name"),k(l,"type","email"),l.required=!0,k(l,"placeholder","email"),k(i,"type","password"),i.required=!0,k(i,"placeholder","password")},m(r,o){E(r,e,o),h(e,t),T(t,f[0]),h(e,s),h(e,l),T(l,f[1]),h(e,c),h(e,i),T(i,f[2]),h(e,p),h(e,n),h(n,_),h(e,g),a&&a.m(e,null),u||(d=[U(t,"input",f[5]),U(l,"input",f[6]),U(i,"input",f[7]),U(e,"submit",R(f[4]))],u=!0)},p(r,[o]){o&1&&t.value!==r[0]&&T(t,r[0]),o&2&&l.value!==r[1]&&T(l,r[1]),o&4&&i.value!==r[2]&&T(i,r[2]),r[3]?a?a.p(r,o):(a=Y(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:A,o:A,d(r){r&&m(e),a&&a.d(),u=!1,V(d)}}}function ue(f,e,t){let s="",l=null,c=null,i=null;const p=async()=>{try{const u=await x(j,l,c);let d=F(X,"whatzapp_users",u.user.displayName);await ee(d,{uid:u.user.uid,name:s,email:l,createdAt:te.fromDate(new Date),isOnline:!0,avatar:null}),t(0,s=""),t(1,l=""),t(2,c=""),t(3,i=null)}catch(u){t(3,i=u.message)}};function n(){s=this.value,t(0,s)}function _(){l=this.value,t(1,l)}function g(){c=this.value,t(2,c)}return[s,l,c,i,p,n,_,g]}class oe extends O{constructor(e){super();D(this,e,ue,ae,$,{})}}function Z(f){let e,t;return{c(){e=v("p"),t=P(f[2]),this.h()},l(s){e=b(s,"P",{class:!0});var l=w(e);t=N(l,f[2]),l.forEach(m),this.h()},h(){k(e,"class","error svelte-1fi3y4c")},m(s,l){E(s,e,l),h(e,t)},p(s,l){l&4&&z(t,s[2])},d(s){s&&m(e)}}}function fe(f){let e,t,s,l,c,i,p,n,_,g,u=f[2]&&Z(f);return{c(){e=v("form"),t=v("input"),s=S(),l=v("input"),c=S(),i=v("button"),p=P("Log in"),n=S(),u&&u.c(),this.h()},l(d){e=b(d,"FORM",{});var a=w(e);t=b(a,"INPUT",{type:!0,placeholder:!0}),s=I(a),l=b(a,"INPUT",{type:!0,placeholder:!0}),c=I(a),i=b(a,"BUTTON",{});var r=w(i);p=N(r,"Log in"),r.forEach(m),n=I(a),u&&u.l(a),a.forEach(m),this.h()},h(){k(t,"type","email"),t.required=!0,k(t,"placeholder","email"),k(l,"type","password"),l.required=!0,k(l,"placeholder","password")},m(d,a){E(d,e,a),h(e,t),T(t,f[0]),h(e,s),h(e,l),T(l,f[1]),h(e,c),h(e,i),h(i,p),h(e,n),u&&u.m(e,null),_||(g=[U(t,"input",f[4]),U(l,"input",f[5]),U(e,"submit",R(f[3]))],_=!0)},p(d,[a]){a&1&&t.value!==d[0]&&T(t,d[0]),a&2&&l.value!==d[1]&&T(l,d[1]),d[2]?u?u.p(d,a):(u=Z(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:A,o:A,d(d){d&&m(e),u&&u.d(),_=!1,V(g)}}}function pe(f,e,t){let s=null,l=null,c=null;const i=async()=>{try{const g=(await le(j,s,l)).user;let u=F(X,"whatzapp_users",g.uid);await re(u,{isOnline:!0}),t(0,s=""),t(1,l=""),t(2,c=null)}catch(_){t(2,c=_.message)}};function p(){s=this.value,t(0,s)}function n(){l=this.value,t(1,l)}return[s,l,c,i,p,n]}class ce extends O{constructor(e){super();D(this,e,pe,fe,$,{})}}function _e(f){let e,t;return{c(){e=v("img"),this.h()},l(s){e=b(s,"IMG",{width:!0,src:!0,alt:!0}),this.h()},h(){k(e,"width","200"),C(e.src,t="loading.gif")||k(e,"src",t),k(e,"alt","spinner gif")},m(s,l){E(s,e,l)},p:A,i:A,o:A,d(s){s&&m(e)}}}function he(f){let e,t,s,l,c,i,p,n,_;const g=[de,me],u=[];function d(a,r){return a[0]?1:0}return p=d(f),n=u[p]=g[p](f),{c(){e=v("div"),t=v("div"),s=v("div"),l=v("img"),i=S(),n.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var r=w(e);t=b(r,"DIV",{});var o=w(t);s=b(o,"DIV",{class:!0});var y=w(s);l=b(y,"IMG",{class:!0,src:!0,alt:!0}),y.forEach(m),i=I(o),n.l(o),o.forEach(m),r.forEach(m),this.h()},h(){k(l,"class","logo"),C(l.src,c="whatzapp.png")||k(l,"src",c),k(l,"alt","whatzapp logo"),k(s,"class","img-wrapper"),k(e,"class","welcome container")},m(a,r){E(a,e,r),h(e,t),h(t,s),h(s,l),h(t,i),u[p].m(t,null),_=!0},p(a,r){let o=p;p=d(a),p===o?u[p].p(a,r):(B(),L(u[o],1,1,()=>{u[o]=null}),W(),n=u[p],n?n.p(a,r):(n=u[p]=g[p](a),n.c()),M(n,1),n.m(t,null))},i(a){_||(M(n),_=!0)},o(a){L(n),_=!1},d(a){a&&m(e),u[p].d()}}}function me(f){let e,t,s,l,c,i,p,n,_,g,u,d,a;return l=new ce({}),{c(){e=v("h2"),t=P("Login"),s=S(),H(l.$$.fragment),c=S(),i=v("p"),p=P("No account yet ? "),n=v("span"),_=P("Signup"),g=P(" instead")},l(r){e=b(r,"H2",{});var o=w(e);t=N(o,"Login"),o.forEach(m),s=I(r),K(l.$$.fragment,r),c=I(r),i=b(r,"P",{});var y=w(i);p=N(y,"No account yet ? "),n=b(y,"SPAN",{});var q=w(n);_=N(q,"Signup"),q.forEach(m),g=N(y," instead"),y.forEach(m)},m(r,o){E(r,e,o),h(e,t),E(r,s,o),Q(l,r,o),E(r,c,o),E(r,i,o),h(i,p),h(i,n),h(n,_),h(i,g),u=!0,d||(a=U(n,"click",f[3]),d=!0)},p:A,i(r){u||(M(l.$$.fragment,r),u=!0)},o(r){L(l.$$.fragment,r),u=!1},d(r){r&&m(e),r&&m(s),J(l,r),r&&m(c),r&&m(i),d=!1,a()}}}function de(f){let e,t,s,l,c,i,p,n,_,g,u,d,a;return l=new oe({}),{c(){e=v("h2"),t=P("Sign up"),s=S(),H(l.$$.fragment),c=S(),i=v("p"),p=P("Already registered ? "),n=v("span"),_=P("Login"),g=P(" instead")},l(r){e=b(r,"H2",{});var o=w(e);t=N(o,"Sign up"),o.forEach(m),s=I(r),K(l.$$.fragment,r),c=I(r),i=b(r,"P",{});var y=w(i);p=N(y,"Already registered ? "),n=b(y,"SPAN",{});var q=w(n);_=N(q,"Login"),q.forEach(m),g=N(y," instead"),y.forEach(m)},m(r,o){E(r,e,o),h(e,t),E(r,s,o),Q(l,r,o),E(r,c,o),E(r,i,o),h(i,p),h(i,n),h(n,_),h(i,g),u=!0,d||(a=U(n,"click",f[2]),d=!0)},p:A,i(r){u||(M(l.$$.fragment,r),u=!0)},o(r){L(l.$$.fragment,r),u=!1},d(r){r&&m(e),r&&m(s),J(l,r),r&&m(c),r&&m(i),d=!1,a()}}}function ge(f){let e,t,s,l;const c=[he,_e],i=[];function p(n,_){return n[1]?0:1}return e=p(f),t=i[e]=c[e](f),{c(){t.c(),s=G()},l(n){t.l(n),s=G()},m(n,_){i[e].m(n,_),E(n,s,_),l=!0},p(n,[_]){let g=e;e=p(n),e===g?i[e].p(n,_):(B(),L(i[g],1,1,()=>{i[g]=null}),W(),t=i[e],t?t.p(n,_):(t=i[e]=c[e](n),t.c()),M(t,1),t.m(s.parentNode,s))},i(n){l||(M(t),l=!0)},o(n){L(t),l=!1},d(n){i[e].d(n),n&&m(s)}}}function ve(f,e,t){let s=!0,l=!1;return se(()=>{const p=ne(j,n=>(n?ie("/chat"):t(1,l=!0),p))}),[s,l,()=>t(0,s=!0),()=>t(0,s=!1)]}class we extends O{constructor(e){super();D(this,e,ve,ge,$,{})}}export{we as default};
